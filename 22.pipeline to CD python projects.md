### 使用pipeline实现push或者merge后自动部署
#### 0、前提条件，gitlab和Jenkins互通(参考13号文档)
#### 1、在Jenkins中创建新的pipeline
```shell script
BookManager_CD
```
#### 2、在Jenkins上创建构建触发器
```shell script
1 选择"构建触发器"里面的"Build when a change is pushed to GitLab. GitLab webhook URL: http://172.16.120.44:8888/project/BookManager_CD"
2 里面的所有"✅"项目全选,然后点"高级"
3 在"高级"里面点Generate,在Secret token地方生成:"ad81c77d914b6098da02a7372857ad5b"
4 在pipeline中定义测试代码
```
```shell script
pipeline {
    agent any

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }
    }
}
```
#### 3、在gitlab上创建
```shell script
1 进入gilab的book_manager项目,点左下角的"设置"-->"webhooks"
2 把jenkins上的URL: "http://172.16.120.44:8888/project/BookManager_CD",复制到"webhooks"里面的URL框
3 复制jenkins上的"Secret token",到"webhooks"里面的"Secret Token":"ad81c77d914b6098da02a7372857ad5b"
4 建议把"Enable SSL verifcation"的"✅"取消掉
5 点击"Add webhook"
6 然后在gitlab上"测试":"Push events",返回值200即可
```