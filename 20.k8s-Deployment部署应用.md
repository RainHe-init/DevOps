### 使用Deployment部署bookmanager
#### 1、给master，node01，node02增加私有Harbor访问
```shell script
[root@k8s-master ~]# cat /etc/docker/daemon.json 
{
 "registry-mirrors": ["https://registry.docker-cn.com"],
 "exec-opts": ["native.cgroupdriver=systemd"],
 "insecure-registries": ["http://harbor.liuxiang.com"]
}
[root@k8s-node01 ~]# cat /etc/docker/daemon.json 
{
 "registry-mirrors": ["https://registry.docker-cn.com"],
 "exec-opts": ["native.cgroupdriver=systemd"],
 "insecure-registries": ["http://harbor.liuxiang.com"]
}
[root@k8s-node02 ~]# cat /etc/docker/daemon.json 
{
 "registry-mirrors": ["https://registry.docker-cn.com"],
 "exec-opts": ["native.cgroupdriver=systemd"],
 "insecure-registries": ["http://harbor.liuxiang.com"]
}
```
#### 2、给master，node01，node02增加hosts文件
```shell script
echo -e "172.16.120.44 harbor.liuxiang.com\n172.16.120.55 gitlab.liuxiang.com" >> /etc/hosts
```
#### 3、给master，node01，node02登陆harbor仓库
```shell script
docker login http://harbor.liuxiang.com

Username: admin
Password: 
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
```
#### 4、安装kompose，通过该软件，解析docker-compose
```shell script
4.1 安装kompose
sudo yum -y install kompose

4.2 进入项目目录,找到docker-compose文件
[root@k8s-master ~]# cd /data/book_manager/
[root@k8s-master book_manager]# ll
总用量 20
...
-rw-r--r--. 1 root root 225 6月  23 07:47 docker-compose.yaml
...

4.3 重新建立新文件夹,拷贝docker-compose文件
[root@k8s-master data]# pwd
/data
[root@k8s-master data]# mkdir BookManager_K8S
[root@k8s-master data]# cp book_manager/docker-compose.yaml BookManager_K8S/

4.4 生成yaml文件
cd BookManager_K8S/
kompose convert
[root@k8s-master BookManager_K8S]# ll
总用量 16
-rw-r--r--. 1 root root 225 7月  10 12:16 docker-compose.yaml
-rw-r--r--. 1 root root 241 7月  10 12:22 web-claim0-persistentvolumeclaim.yaml
-rw-r--r--. 1 root root 860 7月  10 12:22 web-deployment.yaml
-rw-r--r--. 1 root root 332 7月  10 12:27 web-service.yaml
```